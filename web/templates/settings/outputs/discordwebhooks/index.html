{{ define "settings.outputs.discordwebhooks.index" }}
{{ template "header" . }}
{{ template "hero-title" . }}

<div class="columns">
    <div class="column is-one-quarter m-3">
        {{ template "settings.menu" . }}
    </div>
    <div class="column m-3">

        <nav class="level">
            <p class="level-item has-text-centered">
                <a class="button link has-info" href="/settings/outputs/discord/webhooks/new">New</a>
            </p>
        </nav>

        <table class="table is-striped is-fullwidth">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Enabled</th>
                    <th>Actions</th>
                </tr>
            </thead>
            {{ range .Items }}
            <tr>
                <td>{{ .Item.Server }}-{{ .Item.Channel }}</td>
                <td><strong>{{ .Item.Enabled }}</strong></td>
                <td>
                    <div class="field is-grouped">
                        {{ if .Enabled }}
                        <form action="/settings/outputs/discord/webhooks/{{ .Item.ID }}/disable" method="post">
                            <input class="button" type="submit" value="Disable">
                        </form>

                        <form action="/settings/outputs/discord/webhooks/{{ .Item.ID }}/enable" method="post">
                            <input class="button" type="submit" value="Enable" disabled>
                        </form>
                        {{ end }}

                        {{ if .Disabled }}
                        <form target="_blank" action="/settings/outputs/discord/webhooks/{{ .Item.ID }}/disable" method="post">
                            <input class="button" type="submit" value="Disable" disabled>
                        </form>

                        <form action="/settings/outputs/discord/webhooks/{{ .Item.ID }}/enable" method="post">
                            <input class="button" type="submit" value="Enable" >
                        </form>
                        {{ end }}

                        <form action="/settings/outputs/discord/webhooks/{{ .Item.ID }}/edit" method="post">
                            <input class="button" type="submit" value="Edit">
                        </form>
                    </div>
                </td>
            </tr>
            {{ end }}
        </table>
    </div>
</div>

{{ template "footer" . }}
{{ end }}